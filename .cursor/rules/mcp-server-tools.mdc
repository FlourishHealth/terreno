---
description: When using the Terreno MCP server tools to generate code for models, routes, or screens
alwaysApply: false
---

# Using Terreno MCP Server Tools

The Terreno MCP server provides code generation tools that return generated code as text. When using these tools, you must write the returned code to the appropriate files.

## Important: Tools Return Text, Not Files

MCP tools return generated code as text content. They do not create files directly. When you call a tool:

1. Call the appropriate MCP tool with the required arguments
2. Take the returned code text and write it to the appropriate file
3. Complete any follow-up steps (export routes, register in server, regenerate SDK)

## Available Tools

### generate_model

Generates a Mongoose model with proper Terreno conventions.

**After calling**: Write the returned code to `backend/src/models/{modelName}.ts` (lowercase), then export it from `backend/src/models/index.ts`.

### generate_route

Generates a modelRouter route configuration.

**After calling**: 
1. Write the returned code to `backend/src/api/{modelName}.ts` (lowercase)
2. Export from `backend/src/api/index.ts`: `export * from "./{modelName}";`
3. Register in server setup by calling `add{ModelName}Routes(router, options);`
4. Regenerate the frontend SDK: `bun run sdk` in the frontend directory

### generate_screen

Generates a React Native screen component.

**After calling**: Write the returned code to `frontend/src/screens/{ScreenName}Screen.tsx`, then add the screen to your navigation configuration.

### generate_form_fields

Generates form field components for a data model.

**After calling**: Integrate the returned code into your form screen component.

### validate_model_schema

Validates a Mongoose schema follows Terreno conventions.

**After calling**: Review the validation results and fix any issues identified.

## Example Workflow: Creating a New Feature

When asked to create a new API endpoint or feature:

1. **Generate the model** (if needed):
   ```
   Call generate_model with name and fields
   Write to backend/src/models/{name}.ts
   Export from backend/src/models/index.ts
   ```

2. **Generate the route**:
   ```
   Call generate_route with modelName and permissions
   Write to backend/src/api/{name}.ts
   Export from backend/src/api/index.ts
   Register in server setup
   ```

3. **Regenerate SDK**:
   ```
   Run: bun run sdk (in frontend directory)
   ```

4. **Generate screens** (if needed):
   ```
   Call generate_screen for list/detail/form screens
   Write to frontend/src/screens/
   Add to navigation
   ```

## Common Mistakes to Avoid

- Do not expect tools to create files automatically - you must write the returned code
- Do not forget to export new models and routes from their index files
- Do not forget to regenerate the SDK after adding backend routes
- Do not forget to register routes in the server setup
