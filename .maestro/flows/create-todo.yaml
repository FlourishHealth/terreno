url: http://localhost:8082/login
---
# Login and create a todo
# Prerequisites: backend running on port 4000, test data seeded, frontend running on port 8082

- launchApp

# Wait for the login screen to load
- extendedWaitUntil:
    visible: "Welcome Back"
    timeout: 30000

# Login first - tap input fields (index 1 to skip labels)
- tapOn:
    text: "Email"
    index: 1
- inputText: "test@example.com"

- tapOn:
    text: "Password"
    index: 1
- inputText: "testpassword123"

- tapOn: "Login"

# Wait for Todos screen
- extendedWaitUntil:
    visible: "My Todos"
    timeout: 10000

# Create a new todo - tap the input field (index 1 to skip "New Todo" label)
- tapOn:
    text: "What needs to be done?"
- inputText: "Buy groceries"

- tapOn: "Add Todo"

# Assert the todo appears in the list
- extendedWaitUntil:
    visible: "Buy groceries"
    timeout: 5000
